(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),u=n.n(c),o=(n(21),n(15)),i=n(14),l=n(2),s=n(3),f=n.n(s),m="/api/persons",p=function(){return f.a.get(m).then((function(e){return e.data}))},h=function(e){return f.a.post(m,e).then((function(e){return e.data}))},d=function(e,t){return f.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var v=function(e){var t=e.newSearch,n=e.handleSearchChange;return r.a.createElement("div",null,"Filter:",r.a.createElement("input",{type:"text",value:t,onChange:n})," ")},E=function(e){var t=e.handleSubmit,n=e.newName,a=e.handleNameChange,c=e.newNum,u=e.handleNumChange;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{type:"text",value:n,onChange:a})),r.a.createElement("div",null,"Number: ",r.a.createElement("input",{type:"tel",value:c,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},g=function(e){var t=e.persons,n=e.newSearch,a=e.onClick,c=t.filter((function(e){return-1!==e.name.toUpperCase().indexOf(n.toUpperCase())})).map((function(e,t){return r.a.createElement(j,{p:e,onClick:a,key:e.name+t.toString()})}));return r.a.createElement("ul",null,c)},j=function(e){var t=e.p,n=e.onClick;return r.a.createElement("li",null,t.name," ",t.num?": "+t.num:""," ",r.a.createElement("button",{onClick:function(){return n(t.id)}},"Delete")," ")},y=function(e){var t=e.type,n=e.message;return n?r.a.createElement("div",{className:"error"===t?"error":"success"}," ",n):null},w=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),f=s[0],m=s[1],j=Object(a.useState)(""),w=Object(l.a)(j,2),C=w[0],S=w[1],k=Object(a.useState)(""),N=Object(l.a)(k,2),P=N[0],D=N[1],x=Object(a.useState)(""),U=Object(l.a)(x,2),J=U[0],M=U[1],A=Object(a.useState)(""),B=Object(l.a)(A,2),F=B[0],I=B[1];Object(a.useEffect)((function(){p().then((function(e){return c(e)}))}),[]);var T=function(e,t){I(e),M(t),"success"===e&&setTimeout((function(){return M("")}),3224)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(y,{type:F,message:J}),r.a.createElement(v,{newSearch:P,handleSearchChange:function(e){D(e.target.value)}}),r.a.createElement("h3",null,"Add new person"),r.a.createElement(E,{handleSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name.toUpperCase()===f.toUpperCase()}));if(t){if(!window.confirm("".concat(f," is already in the phone book, replace the old number with the new one?")))return;var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{num:C});d(t.id,a).then((function(e){c(n.map((function(n){return n.id!==t.id?n:e}))),T("success","Contact info successfully updated"),m(""),S("")})).catch((function(e){T("error","".concat(t.name," not found"))}))}else{var r=Math.max.apply(Math,Object(o.a)(n.map((function(e){return e.id}))))+1;h({name:f,num:C,id:r}).then((function(e){c(n.concat(e)),T("success","Contact successfully added to the phonebook"),m(""),S("")})).catch((function(e){T("error",e.response.data.error)}))}},newName:f,handleNameChange:function(e){m(e.target.value)},newNum:C,handleNumChange:function(e){S(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(g,{persons:n,newSearch:P,onClick:function(e){var t="Delete ".concat(n.find((function(t){return t.id===e})).name," ?");window.confirm(t)&&b(e).then((function(t){c(n.filter((function(t){return t.id!==e}))),T("success","Contact successfully deleted from the phonebook")}))}}))};u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.60be542e.chunk.js.map